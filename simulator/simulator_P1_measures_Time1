<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>時間概念模擬器 - Time Concept Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&family=Nunito:wght@400;700&display=swap');
        
        body {
            font-family: 'Nunito', 'Noto Sans TC', sans-serif;
            background-color: #f0f9ff;
        }

        /* Clock Hand Transitions */
        .hand {
            transition: transform 0.5s cubic-bezier(0.4, 2.08, 0.55, 0.44);
            transform-origin: 50% 50%;
        }

        /* Calendar Styles */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }
        
        .active-tab {
            background-color: #3b82f6;
            color: white;
            border-bottom: 4px solid #1d4ed8;
        }

        .inactive-tab {
            background-color: white;
            color: #4b5563;
            border-bottom: 4px solid #e5e7eb;
        }

        .highlight-pulse {
            animation: pulse-border 2s infinite;
        }

        @keyframes pulse-border {
            0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
            100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
        }

        /* Notebook vs iPad adjustments */
        @media (min-width: 1024px) {
            .main-container {
                max-width: 1200px;
                margin: 0 auto;
            }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header / Navbar -->
    <header class="bg-white shadow-md p-4 sticky top-0 z-50">
        <div class="main-container flex justify-between items-center">
            <div class="flex items-center gap-4">
                <!-- Logo Placeholder -->
                <div class="w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden border-2 border-blue-100">
                    <img src="logo.png" alt="School Logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';" class="w-full h-full object-cover">
                    <span class="text-xs text-gray-400 font-bold hidden">LOGO</span>
                </div>
                <div>
                    <h1 class="text-xl md:text-2xl font-bold text-blue-800" data-key="appTitle">時間 (一)</h1>
                    <p class="text-sm text-gray-500 hidden md:block" data-key="subTitle">小學數學互動教材</p>
                </div>
            </div>
            
            <button id="langToggle" class="bg-indigo-100 text-indigo-700 px-4 py-2 rounded-full font-bold hover:bg-indigo-200 transition flex items-center gap-2 shadow-sm">
                <i class="fas fa-language"></i> <span id="langText">English</span>
            </button>
        </div>
    </header>

    <!-- Main Navigation Tabs -->
    <nav class="bg-blue-50 pt-4">
        <div class="main-container flex justify-center gap-2 px-2">
            <button onclick="switchTab('hands')" id="tab-hands" class="active-tab flex-1 py-3 px-2 rounded-t-lg font-bold text-center transition md:text-lg">
                <i class="fas fa-clock mr-1"></i> <span data-key="tabHands">認識指針</span>
            </button>
            <button onclick="switchTab('read')" id="tab-read" class="inactive-tab flex-1 py-3 px-2 rounded-t-lg font-bold text-center transition md:text-lg">
                <i class="fas fa-stopwatch mr-1"></i> <span data-key="tabRead">報讀時間</span>
            </button>
            <button onclick="switchTab('calendar')" id="tab-calendar" class="inactive-tab flex-1 py-3 px-2 rounded-t-lg font-bold text-center transition md:text-lg">
                <i class="fas fa-calendar-alt mr-1"></i> <span data-key="tabCalendar">認識日曆</span>
            </button>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-grow bg-white p-4 main-container">
        
        <!-- SECTION 1: HANDS (認識時針分針) -->
        <section id="section-hands" class="h-full flex flex-col md:flex-row items-center justify-center gap-8 py-6">
            <!-- Clock Visual -->
            <div class="relative w-72 h-72 md:w-96 md:h-96 flex-shrink-0">
                <svg viewBox="0 0 100 100" class="w-full h-full drop-shadow-xl">
                    <!-- Clock Face -->
                    <circle cx="50" cy="50" r="48" fill="#fff" stroke="#3b82f6" stroke-width="2" />
                    <!-- Markings -->
                    <g id="clock-marks"></g>
                    <!-- Hands -->
                    <line id="demo-hour-hand" x1="50" y1="50" x2="50" y2="25" stroke="#ef4444" stroke-width="4" stroke-linecap="round" class="hand" />
                    <line id="demo-minute-hand" x1="50" y1="50" x2="50" y2="10" stroke="#3b82f6" stroke-width="3" stroke-linecap="round" class="hand" />
                    <!-- Center Dot -->
                    <circle cx="50" cy="50" r="3" fill="#1e3a8a" />
                </svg>
                
                <!-- Labels overlay -->
                <div id="label-hour" class="absolute top-1/3 left-1/4 bg-red-100 text-red-800 px-2 py-1 rounded text-sm font-bold opacity-0 transition-opacity pointer-events-none" data-key="labelHour">時針 (短)</div>
                <div id="label-minute" class="absolute top-10 right-1/4 bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm font-bold opacity-0 transition-opacity pointer-events-none" data-key="labelMinute">分針 (長)</div>
            </div>

            <!-- Controls -->
            <div class="max-w-md w-full space-y-4">
                <div class="bg-blue-50 p-6 rounded-xl border border-blue-100">
                    <h2 class="text-xl font-bold text-blue-900 mb-2" data-key="handsTitle">觀察指針</h2>
                    <p class="text-gray-600 mb-4" data-key="handsDesc">點擊下方按鈕來認識時針和分針的分別。</p>
                    
                    <div class="grid grid-cols-1 gap-3">
                        <button onclick="highlightHand('hour')" class="bg-white border-2 border-red-400 text-red-600 py-3 rounded-lg font-bold hover:bg-red-50 transition flex items-center justify-center gap-2 shadow-sm">
                            <i class="fas fa-arrow-up"></i> <span data-key="btnShowHour">找出時針</span>
                        </button>
                        <button onclick="highlightHand('minute')" class="bg-white border-2 border-blue-400 text-blue-600 py-3 rounded-lg font-bold hover:bg-blue-50 transition flex items-center justify-center gap-2 shadow-sm">
                            <i class="fas fa-long-arrow-alt-up"></i> <span data-key="btnShowMinute">找出分針</span>
                        </button>
                        <button onclick="highlightHand('both')" class="bg-gray-100 text-gray-600 py-3 rounded-lg font-bold hover:bg-gray-200 transition" data-key="btnReset">還原</button>
                    </div>

                    <div id="hand-info-box" class="mt-4 p-4 bg-white rounded-lg border border-gray-200 min-h-[80px] flex items-center justify-center text-center text-lg font-bold text-slate-700">
                        <span data-key="infoDefault">請選擇一個按鈕開始學習。</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: READING TIME (報讀時和半) -->
        <section id="section-read" class="hidden h-full flex flex-col items-center justify-start py-6 gap-6">
            
            <div class="flex flex-col md:flex-row items-center gap-10 w-full justify-center">
                <!-- Interactive Clock -->
                <div class="relative w-64 h-64 md:w-80 md:h-80">
                    <svg viewBox="0 0 100 100" class="w-full h-full drop-shadow-xl">
                        <circle cx="50" cy="50" r="48" fill="#fff" stroke="#3b82f6" stroke-width="2" />
                        <g id="read-clock-marks"></g>
                        <!-- Hands for reading -->
                        <line id="read-hour-hand" x1="50" y1="50" x2="50" y2="25" stroke="#ef4444" stroke-width="4" stroke-linecap="round" class="hand" />
                        <line id="read-minute-hand" x1="50" y1="50" x2="50" y2="10" stroke="#3b82f6" stroke-width="3" stroke-linecap="round" class="hand" />
                        <circle cx="50" cy="50" r="3" fill="#1e3a8a" />
                    </svg>
                </div>

                <!-- Control Panel -->
                <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100 w-full max-w-md">
                    <div class="text-center mb-6">
                        <h3 class="text-gray-500 text-sm font-bold uppercase tracking-wider mb-1" data-key="currentTime">現在時刻</h3>
                        <div class="text-4xl md:text-5xl font-extrabold text-blue-600 bg-blue-50 py-3 rounded-lg border border-blue-100">
                            <span id="digital-time">3:00</span>
                        </div>
                        <div class="mt-2 text-lg font-bold text-gray-700" id="text-time">3 時</div>
                    </div>

                    <div class="space-y-3">
                        <p class="text-sm text-gray-500 text-center" data-key="controlTip">調整時間：</p>
                        <div class="flex justify-between gap-2">
                            <button onclick="changeTime(-1)" class="flex-1 bg-red-100 text-red-700 py-3 rounded-lg font-bold hover:bg-red-200 active:scale-95 transition">- 1 <span data-key="hourUnit">時</span></button>
                            <button onclick="changeTime(1)" class="flex-1 bg-green-100 text-green-700 py-3 rounded-lg font-bold hover:bg-green-200 active:scale-95 transition">+ 1 <span data-key="hourUnit">時</span></button>
                        </div>
                        <div class="flex justify-between gap-2">
                            <button onclick="toggleHalf()" id="btn-half" class="w-full bg-indigo-100 text-indigo-700 py-3 rounded-lg font-bold hover:bg-indigo-200 active:scale-95 transition" data-key="btnToggleHalf">切換半小時</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Challenge Mode -->
            <div class="w-full max-w-2xl bg-yellow-50 rounded-xl p-4 border border-yellow-200 flex flex-col md:flex-row items-center justify-between gap-4">
                <div class="flex items-center gap-3">
                    <div class="bg-yellow-400 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold text-xl">?</div>
                    <div>
                        <h4 class="font-bold text-yellow-800" data-key="challengeTitle">小測驗</h4>
                        <p class="text-sm text-yellow-700" data-key="challengeDesc">我會顯示一個時間，請你大聲讀出來！</p>
                    </div>
                </div>
                <button onclick="randomTime()" class="bg-yellow-400 text-yellow-900 px-6 py-2 rounded-full font-bold shadow hover:bg-yellow-500 transition w-full md:w-auto" data-key="btnRandom">
                    <i class="fas fa-dice mr-2"></i> <span data-key="btnRandomText">隨機題目</span>
                </button>
            </div>
        </section>

        <!-- SECTION 3: CALENDAR (認識日曆) -->
        <section id="section-calendar" class="hidden h-full flex flex-col items-center py-6">
            
            <div class="flex flex-col lg:flex-row gap-8 w-full max-w-5xl">
                <!-- Calendar Visual -->
                <div class="flex-1 bg-white shadow-xl rounded-2xl overflow-hidden border border-gray-200 relative">
                    <!-- Header (Year/Month) -->
                    <div id="cal-header" class="bg-red-500 text-white p-4 flex justify-between items-center cursor-pointer hover:bg-red-600 transition" onclick="explainCalendar('header')">
                        <div>
                            <span class="text-sm opacity-80" data-key="calYearLabel">年份</span>
                            <div class="text-xl font-bold">2024</div>
                        </div>
                        <div class="text-right">
                            <span class="text-sm opacity-80" data-key="calMonthLabel">月份</span>
                            <div class="text-3xl font-bold"><span data-key="calMonthName">10月</span> <span class="text-lg opacity-70">OCT</span></div>
                        </div>
                    </div>

                    <!-- Weekdays -->
                    <div id="cal-weekdays" class="bg-gray-100 p-2 calendar-grid text-center font-bold text-gray-600 text-sm md:text-base cursor-pointer hover:bg-gray-200 transition" onclick="explainCalendar('week')">
                        <div class="text-red-500">SUN</div>
                        <div>MON</div>
                        <div>TUE</div>
                        <div>WED</div>
                        <div>THU</div>
                        <div>FRI</div>
                        <div>SAT</div>
                    </div>

                    <!-- Days -->
                    <div id="cal-days" class="p-4 calendar-grid gap-y-4" onclick="explainCalendar('day')">
                        <!-- JS will populate empty slots and days -->
                        <!-- Example structural filler -->
                        <div class="p-2"></div><div class="p-2"></div> <!-- Empty slots -->
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">1</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">2</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">3</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">4</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">5</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">6</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">7</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">8</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">9</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">10</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">11</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">12</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">13</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">14</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">15</button>
                        <button class="aspect-square flex items-center justify-center rounded-full bg-blue-600 text-white font-bold shadow-md transform scale-110">16</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">17</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">18</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">19</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">20</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">21</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">22</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">23</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">24</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">25</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">26</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">27</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">28</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">29</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">30</button>
                        <button class="aspect-square flex items-center justify-center rounded-full hover:bg-blue-100 text-gray-700 font-medium">31</button>
                    </div>
                </div>

                <!-- Info Panel -->
                <div class="lg:w-80 flex flex-col gap-4">
                    <div class="bg-blue-50 p-6 rounded-xl border border-blue-100 flex-grow">
                        <div class="flex items-center gap-3 mb-4 text-blue-800">
                            <i class="fas fa-info-circle text-2xl"></i>
                            <h3 class="text-xl font-bold" data-key="calInfoTitle">日曆小知識</h3>
                        </div>
                        <div id="cal-explanation" class="text-gray-700 text-lg leading-relaxed min-h-[120px]">
                            <span data-key="calInfoDefault">試著點擊左邊日曆的不同部分（頂部、星期、日期），看看它們代表什麼！</span>
                        </div>
                    </div>

                    <!-- Interactive Questions -->
                    <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm">
                        <h4 class="font-bold text-gray-600 mb-2" data-key="calQuizTitle">找一找：</h4>
                        <div class="flex flex-wrap gap-2">
                            <button onclick="highlightCalendarPart('header')" class="px-3 py-1 bg-red-100 text-red-600 rounded-full text-sm font-bold hover:bg-red-200 transition" data-key="btnFindYear">年份和月份</button>
                            <button onclick="highlightCalendarPart('week')" class="px-3 py-1 bg-gray-200 text-gray-700 rounded-full text-sm font-bold hover:bg-gray-300 transition" data-key="btnFindWeek">星期</button>
                            <button onclick="highlightCalendarPart('day')" class="px-3 py-1 bg-blue-100 text-blue-600 rounded-full text-sm font-bold hover:bg-blue-200 transition" data-key="btnFindDay">日 / 號數</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-50 text-center p-4 text-gray-400 text-xs">
        &copy; 2024 Math Concepts Simulator. Designed for iPad & Notebook.
    </footer>

    <script>
        // --- TRANSLATION DATA ---
        const i18n = {
            zh: {
                appTitle: "時間 (一)",
                subTitle: "小學數學互動教材",
                tabHands: "認識指針",
                tabRead: "報讀時間",
                tabCalendar: "認識日曆",
                handsTitle: "觀察指針",
                handsDesc: "點擊下方按鈕來認識時針和分針的分別。",
                btnShowHour: "找出時針",
                btnShowMinute: "找出分針",
                btnReset: "還原",
                labelHour: "時針 (短)",
                labelMinute: "分針 (長)",
                infoDefault: "請選擇一個按鈕開始學習。",
                infoHour: "這是時針。它是紅色的，比較短和粗。",
                infoMinute: "這是分針。它是藍色的，比較長和幼。",
                currentTime: "現在時刻",
                hourUnit: "時",
                controlTip: "調整時間：",
                btnToggleHalf: "切換半小時 (30分)",
                challengeTitle: "小測驗",
                challengeDesc: "我會顯示一個時間，請你大聲讀出來！",
                btnRandom: "隨機題目",
                btnRandomText: "隨機題目",
                textOClock: " 時",
                textHalf: " 時半",
                calYearLabel: "年份",
                calMonthLabel: "月份",
                calMonthName: "10月",
                calInfoTitle: "日曆小知識",
                calInfoDefault: "試著點擊左邊日曆的不同部分（頂部、星期、日期），看看它們代表什麼！",
                calExpHeader: "這是年份和月份。它告訴我們現在是哪一年、哪一月。",
                calExpWeek: "這是星期。一個星期有七天（星期日到星期六）。",
                calExpDay: "這是日期（日）。每一個數字代表該月的一天。",
                calQuizTitle: "找一找：",
                btnFindYear: "年份和月份",
                btnFindWeek: "星期",
                btnFindDay: "日 / 號數",
                weekDays: ["日", "一", "二", "三", "四", "五", "六"]
            },
            en: {
                appTitle: "Time (Part 1)",
                subTitle: "Primary Math Interactive Tool",
                tabHands: "Clock Hands",
                tabRead: "Reading Time",
                tabCalendar: "Calendar",
                handsTitle: "Observe the Hands",
                handsDesc: "Click the buttons below to learn the difference between hands.",
                btnShowHour: "Show Hour Hand",
                btnShowMinute: "Show Minute Hand",
                btnReset: "Reset",
                labelHour: "Hour Hand (Short)",
                labelMinute: "Minute Hand (Long)",
                infoDefault: "Select a button to start learning.",
                infoHour: "This is the Hour Hand. It is red, shorter, and thicker.",
                infoMinute: "This is the Minute Hand. It is blue, longer, and thinner.",
                currentTime: "Current Time",
                hourUnit: "hr",
                controlTip: "Adjust Time:",
                btnToggleHalf: "Toggle Half Hour (30m)",
                challengeTitle: "Quiz Mode",
                challengeDesc: "Read the displayed time out loud!",
                btnRandom: "Random",
                btnRandomText: "Random Time",
                textOClock: " o'clock",
                textHalf: " thirty (Half past)",
                calYearLabel: "Year",
                calMonthLabel: "Month",
                calMonthName: "October",
                calInfoTitle: "Calendar Facts",
                calInfoDefault: "Click parts of the calendar (Top, Weekdays, Days) to learn about them!",
                calExpHeader: "This is the Year and Month. It tells us when we are.",
                calExpWeek: "These are Days of the Week. There are 7 days in a week.",
                calExpDay: "These are Dates (Days). Each number is one day in the month.",
                calQuizTitle: "Find:",
                btnFindYear: "Year & Month",
                btnFindWeek: "Weekdays",
                btnFindDay: "Dates",
                weekDays: ["SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"]
            }
        };

        let currentLang = 'zh';
        
        // --- INITIALIZATION ---
        window.onload = function() {
            drawClockMarks('clock-marks');
            drawClockMarks('read-clock-marks');
            updateLang();
            updateReadClockUI();
        };

        // --- LANGUAGE LOGIC ---
        const langToggleBtn = document.getElementById('langToggle');
        langToggleBtn.addEventListener('click', () => {
            currentLang = currentLang === 'zh' ? 'en' : 'zh';
            document.getElementById('langText').textContent = currentLang === 'zh' ? 'English' : '中文';
            updateLang();
        });

        function updateLang() {
            document.querySelectorAll('[data-key]').forEach(el => {
                const key = el.getAttribute('data-key');
                if (i18n[currentLang][key]) {
                    el.textContent = i18n[currentLang][key];
                }
            });
            // Update dynamic text
            updateReadClockUI();
            
            // Update calendar weekdays if needed
            if (currentLang === 'zh') {
                const dayDivs = document.querySelectorAll('#cal-weekdays div');
                const days = i18n.zh.weekDays;
                dayDivs.forEach((div, idx) => div.textContent = days[idx]);
            } else {
                const dayDivs = document.querySelectorAll('#cal-weekdays div');
                const days = i18n.en.weekDays;
                dayDivs.forEach((div, idx) => div.textContent = days[idx]);
            }
        }

        // --- TAB NAVIGATION ---
        function switchTab(tabName) {
            // Hide all sections
            document.getElementById('section-hands').classList.add('hidden');
            document.getElementById('section-read').classList.add('hidden');
            document.getElementById('section-calendar').classList.add('hidden');
            
            // Reset Tabs
            ['hands', 'read', 'calendar'].forEach(t => {
                const btn = document.getElementById(`tab-${t}`);
                btn.classList.remove('active-tab');
                btn.classList.add('inactive-tab');
            });

            // Show selected
            document.getElementById(`section-${tabName}`).classList.remove('hidden');
            const activeBtn = document.getElementById(`tab-${tabName}`);
            activeBtn.classList.remove('inactive-tab');
            activeBtn.classList.add('active-tab');
        }

        // --- SECTION 1: HANDS LOGIC ---
        function highlightHand(type) {
            const hHand = document.getElementById('demo-hour-hand');
            const mHand = document.getElementById('demo-minute-hand');
            const hLabel = document.getElementById('label-hour');
            const mLabel = document.getElementById('label-minute');
            const infoBox = document.getElementById('hand-info-box');

            // Reset opacity and styling
            hHand.style.opacity = '0.3';
            mHand.style.opacity = '0.3';
            hLabel.style.opacity = '0';
            mLabel.style.opacity = '0';

            if (type === 'hour') {
                hHand.style.opacity = '1';
                hLabel.style.opacity = '1';
                infoBox.textContent = i18n[currentLang].infoHour;
                infoBox.className = "mt-4 p-4 bg-red-50 rounded-lg border border-red-200 text-center text-lg font-bold text-red-700 min-h-[80px] flex items-center justify-center";
            } else if (type === 'minute') {
                mHand.style.opacity = '1';
                mLabel.style.opacity = '1';
                infoBox.textContent = i18n[currentLang].infoMinute;
                infoBox.className = "mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200 text-center text-lg font-bold text-blue-700 min-h-[80px] flex items-center justify-center";
            } else {
                hHand.style.opacity = '1';
                mHand.style.opacity = '1';
                infoBox.textContent = i18n[currentLang].infoDefault;
                infoBox.className = "mt-4 p-4 bg-white rounded-lg border border-gray-200 text-center text-lg font-bold text-slate-700 min-h-[80px] flex items-center justify-center";
            }
        }

        // --- SECTION 2: READING TIME LOGIC ---
        let currentHour = 3;
        let currentMinute = 0; // 0 or 30

        function drawClockMarks(groupId) {
            const group = document.getElementById(groupId);
            group.innerHTML = '';
            for (let i = 0; i < 12; i++) {
                const angle = (i * 30) * (Math.PI / 180);
                const x1 = 50 + 40 * Math.sin(angle);
                const y1 = 50 - 40 * Math.cos(angle);
                const x2 = 50 + 45 * Math.sin(angle);
                const y2 = 50 - 45 * Math.cos(angle);
                
                const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                line.setAttribute("x1", x1);
                line.setAttribute("y1", y1);
                line.setAttribute("x2", x2);
                line.setAttribute("y2", y2);
                line.setAttribute("stroke", "#94a3b8");
                line.setAttribute("stroke-width", i % 3 === 0 ? "3" : "1");
                group.appendChild(line);

                // Add Numbers
                if(groupId === 'read-clock-marks') {
                     const numX = 50 + 34 * Math.sin(angle);
                     const numY = 50 - 34 * Math.cos(angle);
                     const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
                     const num = i === 0 ? 12 : i;
                     text.setAttribute("x", numX);
                     text.setAttribute("y", numY);
                     text.setAttribute("text-anchor", "middle");
                     text.setAttribute("dominant-baseline", "middle");
                     text.setAttribute("font-size", "8");
                     text.setAttribute("font-family", "Arial");
                     text.setAttribute("fill", "#64748b");
                     text.setAttribute("font-weight", "bold");
                     text.textContent = num;
                     group.appendChild(text);
                }
            }
        }

        function updateReadClockUI() {
            // Logic for Hour Hand angle
            // 30 degrees per hour. Plus 0.5 degrees per minute.
            const hAngle = (currentHour % 12) * 30 + (currentMinute * 0.5);
            const mAngle = currentMinute * 6;

            document.getElementById('read-hour-hand').style.transform = `rotate(${hAngle}deg)`;
            document.getElementById('read-minute-hand').style.transform = `rotate(${mAngle}deg)`;

            // Digital Display
            const mStr = currentMinute === 0 ? "00" : "30";
            document.getElementById('digital-time').textContent = `${currentHour}:${mStr}`;

            // Text Display
            const textTime = document.getElementById('text-time');
            if (currentLang === 'zh') {
                if (currentMinute === 0) {
                    textTime.textContent = `${currentHour} 時`;
                } else {
                    textTime.textContent = `${currentHour} 時半`;
                }
            } else {
                if (currentMinute === 0) {
                    textTime.textContent = `${currentHour} o'clock`;
                } else {
                    textTime.textContent = `${currentHour}:30 (Half past ${currentHour})`;
                }
            }
        }

        function changeTime(delta) {
            currentHour += delta;
            if (currentHour > 12) currentHour = 1;
            if (currentHour < 1) currentHour = 12;
            updateReadClockUI();
        }

        function toggleHalf() {
            currentMinute = currentMinute === 0 ? 30 : 0;
            updateReadClockUI();
        }

        function randomTime() {
            currentHour = Math.floor(Math.random() * 12) + 1;
            currentMinute = Math.random() > 0.5 ? 30 : 0;
            updateReadClockUI();
        }

        // --- SECTION 3: CALENDAR LOGIC ---
        function explainCalendar(part) {
            const expBox = document.getElementById('cal-explanation');
            const h = document.getElementById('cal-header');
            const w = document.getElementById('cal-weekdays');
            const d = document.getElementById('cal-days');

            // Reset borders
            h.classList.remove('ring-4', 'ring-red-300');
            w.classList.remove('ring-4', 'ring-gray-400');
            d.classList.remove('ring-4', 'ring-blue-300');

            if (part === 'header') {
                expBox.textContent = i18n[currentLang].calExpHeader;
                h.classList.add('ring-4', 'ring-red-300');
            } else if (part === 'week') {
                expBox.textContent = i18n[currentLang].calExpWeek;
                w.classList.add('ring-4', 'ring-gray-400');
            } else if (part === 'day') {
                expBox.textContent = i18n[currentLang].calExpDay;
                d.classList.add('ring-4', 'ring-blue-300');
            }
        }

        function highlightCalendarPart(part) {
            explainCalendar(part); // Reuse logic
        }

    </script>
</body>
</html>
