<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¹³é¢åœ–å½¢æ¢ç´¢å®¶ | Shape Explorer</title>
    
    <!-- å¼•å…¥ Tailwind CSS é€²è¡Œå¿«é€Ÿæ’ç‰ˆèˆ‡éŸ¿æ‡‰å¼è¨­è¨ˆ -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- å¼•å…¥ Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&family=Fredoka:wght@400;600&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Fredoka', 'Noto Sans TC', sans-serif;
            background-color: #f0f9ff; /* æ·ºè—èƒŒæ™¯ */
            -webkit-tap-highlight-color: transparent; /* ç§»é™¤ç§»å‹•ç«¯é»æ“Šé«˜äº® */
        }

        /* è‡ªå®šç¾©å‹•ç•« */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .shape-float {
            animation: float 3s ease-in-out infinite;
        }

        .btn-pop:active {
            transform: scale(0.95);
        }

        .card-shadow {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }

        /* éš±è—æ²è»¸ä½†ä¿ç•™åŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden text-slate-800">

    <!-- é é¦–å°èˆª -->
    <header class="bg-white p-4 shadow-md z-10 flex justify-between items-center h-20 shrink-0">
        <div class="flex items-center gap-4">
            <!-- Logo å€åŸŸ: å¦‚æœ logo.png ä¸å­˜åœ¨ï¼Œé¡¯ç¤ºæ›¿ä»£æ–‡å­— -->
            <div class="w-12 h-12 md:w-16 md:h-16 relative flex items-center justify-center bg-blue-100 rounded-lg overflow-hidden border-2 border-blue-200">
                <img src="logo.png" alt="Logo" class="w-full h-full object-contain" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="absolute inset-0 hidden items-center justify-center text-blue-500 font-bold text-xs text-center p-1" style="display: none;">
                    LOGO
                </div>
            </div>
            <div>
                <h1 class="text-xl md:text-2xl font-bold text-blue-600 tracking-wide" id="app-title">å¹³é¢åœ–å½¢æ¢ç´¢å®¶</h1>
                <p class="text-xs md:text-sm text-gray-500 hidden md:block" id="app-subtitle">ç›´è§€èªè­˜ä¸‰è§’å½¢ã€å››é‚Šå½¢èˆ‡åœ“å½¢</p>
            </div>
        </div>
        
        <!-- èªè¨€åˆ‡æ›æŒ‰éˆ• -->
        <button onclick="toggleLanguage()" class="bg-indigo-100 hover:bg-indigo-200 text-indigo-700 px-4 py-2 rounded-full font-bold transition-colors shadow-sm flex items-center gap-2">
            <span class="text-xl">ğŸŒ</span>
            <span id="lang-btn-text">English</span>
        </button>
    </header>

    <!-- ä¸»è¦å…§å®¹å€ -->
    <main id="main-container" class="flex-1 relative overflow-y-auto no-scrollbar p-4 md:p-8 flex flex-col items-center justify-start">
        <!-- å‹•æ…‹å…§å®¹å°‡ç”± JS æ¸²æŸ“ -->
    </main>

    <!-- é å°¾ -->
    <footer class="bg-white p-2 text-center text-gray-400 text-xs shrink-0">
        Â© 2024 Shape Simulator
    </footer>

    <!-- JavaScript é‚è¼¯ -->
    <script>
        // --- 1. è³‡æ–™è¨­å®š (Data) ---
        
        const state = {
            lang: 'zh', // 'zh' or 'en'
            currentView: 'home', // 'home', 'learn', 'game'
            score: 0,
            gameTargetType: null, // éŠæˆ²ä¸­ç•¶å‰è¦æ‰¾çš„åœ–å½¢é¡å‹
            isGameActive: false
        };

        const translations = {
            zh: {
                title: "å¹³é¢åœ–å½¢æ¢ç´¢å®¶",
                subtitle: "ç›´è§€èªè­˜ä¸‰è§’å½¢ã€å››é‚Šå½¢èˆ‡åœ“å½¢",
                langBtn: "English",
                menuLearn: "åœ–å½¢å¯¦é©—å®¤",
                menuLearnDesc: "é»æ“Šåœ–å½¢ï¼Œäº†è§£å®ƒå€‘çš„ç‰¹å¾µèˆ‡åç¨±ã€‚",
                menuGame: "åœ–å½¢å¤§æŒ‘æˆ°",
                menuGameDesc: "æ¸¬è©¦ä½ çš„çœ¼åŠ›ï¼Œæ‰¾å‡ºæ­£ç¢ºçš„åœ–å½¢ï¼",
                back: "è¿”å›ä¸»é¸å–®",
                properties: "ç‰¹å¾µï¼š",
                sides: "é‚Š",
                corners: "è§’",
                noCorners: "æ²’æœ‰è§’",
                curvedLine: "ä¸€æ¢æ›²ç·š",
                gamePrompt: "è«‹æ‰¾å‡ºæ‰€æœ‰çš„ï¼š",
                score: "å¾—åˆ†",
                correct: "ç­”å°äº†ï¼",
                wrong: "å†è©¦ä¸€æ¬¡ï¼",
                restart: "å†ä¾†ä¸€å±€",
                shapes: {
                    triangle: "ä¸‰è§’å½¢",
                    circle: "åœ“å½¢",
                    square: "æ­£æ–¹å½¢",
                    rectangle: "é•·æ–¹å½¢",
                    quadrilateral: "å››é‚Šå½¢"
                },
                descriptions: {
                    triangle: "æˆ‘æœ‰ 3 æ¢ç›´ç›´çš„é‚Šå’Œ 3 å€‹å°–å°–çš„è§’ã€‚",
                    circle: "æˆ‘åœ“æ»¾æ»¾çš„ï¼Œæ²’æœ‰å°–å°–çš„è§’ï¼Œåªæœ‰ä¸€æ¢å½å½çš„æ›²ç·šã€‚",
                    square: "æˆ‘æœ‰ 4 æ¢ä¸€æ¨£é•·çš„é‚Šå’Œ 4 å€‹ç›´è§’ã€‚",
                    rectangle: "æˆ‘æœ‰ 4 æ¢é‚Šï¼Œå°é¢çš„é‚Šä¸€æ¨£é•·ï¼Œé‚„æœ‰ 4 å€‹ç›´è§’ã€‚",
                    quadrilateral: "æˆ‘æœ‰ 4 æ¢é‚Šå’Œ 4 å€‹è§’ï¼Œå½¢ç‹€åƒè®Šè¬åŒ–ã€‚"
                }
            },
            en: {
                title: "Shape Explorer",
                subtitle: "Learn about Triangles, Quadrilaterals, and Circles",
                langBtn: "ä¸­æ–‡",
                menuLearn: "Shape Lab",
                menuLearnDesc: "Tap shapes to learn their names and features.",
                menuGame: "Shape Challenge",
                menuGameDesc: "Test your skills! Find and sort the shapes.",
                back: "Main Menu",
                properties: "Properties:",
                sides: "Sides",
                corners: "Corners",
                noCorners: "No corners",
                curvedLine: "1 curved line",
                gamePrompt: "Find all the:",
                score: "Score",
                correct: "Correct!",
                wrong: "Try Again!",
                restart: "Play Again",
                shapes: {
                    triangle: "Triangle",
                    circle: "Circle",
                    square: "Square",
                    rectangle: "Rectangle",
                    quadrilateral: "Quadrilateral"
                },
                descriptions: {
                    triangle: "I have 3 straight sides and 3 corners.",
                    circle: "I am round. I have no corners, just 1 curved line.",
                    square: "I have 4 equal sides and 4 square corners.",
                    rectangle: "I have 4 sides (opposites are equal) and 4 corners.",
                    quadrilateral: "I am any shape with 4 sides and 4 corners."
                }
            }
        };

        // åœ–å½¢å®šç¾© (SVG Paths)
        const shapesData = [
            {
                id: 'triangle',
                type: 'triangle',
                color: 'text-yellow-400',
                fill: 'fill-yellow-400',
                bg: 'bg-yellow-100',
                viewBox: "0 0 100 100",
                path: '<polygon points="50,15 90,85 10,85" />',
                prop: { sides: 3, corners: 3 }
            },
            {
                id: 'circle',
                type: 'circle',
                color: 'text-red-400',
                fill: 'fill-red-400',
                bg: 'bg-red-100',
                viewBox: "0 0 100 100",
                path: '<circle cx="50" cy="50" r="40" />',
                prop: { sides: 0, corners: 0 }
            },
            {
                id: 'square',
                type: 'quadrilateral', // å»£ç¾©åˆ†é¡
                subType: 'square',    // ç‹¹ç¾©åç¨±
                color: 'text-blue-400',
                fill: 'fill-blue-400',
                bg: 'bg-blue-100',
                viewBox: "0 0 100 100",
                path: '<rect x="15" y="15" width="70" height="70" />',
                prop: { sides: 4, corners: 4 }
            },
            {
                id: 'rectangle',
                type: 'quadrilateral',
                subType: 'rectangle',
                color: 'text-green-400',
                fill: 'fill-green-400',
                bg: 'bg-green-100',
                viewBox: "0 0 100 100",
                path: '<rect x="10" y="25" width="80" height="50" />',
                prop: { sides: 4, corners: 4 }
            }
        ];

        // --- 2. æ ¸å¿ƒåŠŸèƒ½ (Core Functions) ---

        function init() {
            renderView();
        }

        function toggleLanguage() {
            state.lang = state.lang === 'zh' ? 'en' : 'zh';
            updateStaticText();
            renderView(); // é‡æ–°æ¸²æŸ“ç•¶å‰è¦–åœ–ä»¥æ›´æ–°æ–‡å­—
        }

        function updateStaticText() {
            const t = translations[state.lang];
            document.getElementById('app-title').innerText = t.title;
            document.getElementById('app-subtitle').innerText = t.subtitle;
            document.getElementById('lang-btn-text').innerText = t.langBtn;
        }

        function navigateTo(view) {
            state.currentView = view;
            renderView();
        }

        function renderView() {
            const container = document.getElementById('main-container');
            container.innerHTML = ''; // æ¸…ç©ºå…§å®¹

            if (state.currentView === 'home') {
                renderHome(container);
            } else if (state.currentView === 'learn') {
                renderLearn(container);
            } else if (state.currentView === 'game') {
                renderGame(container);
            }
        }

        // --- 3. ç•«é¢æ¸²æŸ“ (Renderers) ---

        // ä¸»é¸å–®
        function renderHome(container) {
            const t = translations[state.lang];
            
            const menuHtml = `
                <div class="w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-8 mt-4 md:mt-10">
                    <!-- å­¸ç¿’æ¨¡å¼å¡ç‰‡ -->
                    <div onclick="navigateTo('learn')" class="cursor-pointer group relative bg-white rounded-3xl p-6 md:p-10 card-shadow hover:scale-105 transition-all duration-300 border-b-8 border-yellow-200 active:border-b-0 active:translate-y-2">
                        <div class="absolute top-4 right-4 text-6xl opacity-20 group-hover:opacity-40 transition-opacity">ğŸ“–</div>
                        <div class="flex justify-center mb-6">
                            <svg class="w-32 h-32 drop-shadow-lg shape-float" viewBox="0 0 100 100">
                                <circle cx="30" cy="30" r="20" class="fill-red-400" opacity="0.8"/>
                                <rect x="40" y="40" width="40" height="40" class="fill-blue-400" opacity="0.8"/>
                                <polygon points="80,20 95,50 65,50" class="fill-yellow-400" opacity="0.8"/>
                            </svg>
                        </div>
                        <h2 class="text-3xl font-bold text-gray-800 mb-2 text-center group-hover:text-yellow-600 transition-colors">${t.menuLearn}</h2>
                        <p class="text-gray-500 text-center text-lg">${t.menuLearnDesc}</p>
                    </div>

                    <!-- éŠæˆ²æ¨¡å¼å¡ç‰‡ -->
                    <div onclick="navigateTo('game')" class="cursor-pointer group relative bg-white rounded-3xl p-6 md:p-10 card-shadow hover:scale-105 transition-all duration-300 border-b-8 border-green-200 active:border-b-0 active:translate-y-2">
                        <div class="absolute top-4 right-4 text-6xl opacity-20 group-hover:opacity-40 transition-opacity">ğŸ®</div>
                        <div class="flex justify-center mb-6">
                            <svg class="w-32 h-32 drop-shadow-lg shape-float" viewBox="0 0 100 100" style="animation-delay: 1s;">
                                <path d="M20,50 L50,20 L80,50 L50,80 Z" class="fill-green-400" opacity="0.8"/>
                                <circle cx="80" cy="20" r="10" class="fill-purple-400" opacity="0.6"/>
                                <rect x="10" y="70" width="20" height="20" class="fill-orange-400" opacity="0.6"/>
                            </svg>
                        </div>
                        <h2 class="text-3xl font-bold text-gray-800 mb-2 text-center group-hover:text-green-600 transition-colors">${t.menuGame}</h2>
                        <p class="text-gray-500 text-center text-lg">${t.menuGameDesc}</p>
                    </div>
                </div>
            `;
            container.innerHTML = menuHtml;
        }

        // å­¸ç¿’æ¨¡å¼
        function renderLearn(container) {
            const t = translations[state.lang];
            
            // å»ºç«‹å°èˆªåˆ—
            const nav = document.createElement('div');
            nav.className = "w-full max-w-5xl flex justify-start mb-4";
            nav.innerHTML = `<button onclick="navigateTo('home')" class="text-gray-500 hover:text-blue-600 font-bold flex items-center gap-1 transition-colors"><span class="text-2xl">â¬…</span> ${t.back}</button>`;
            container.appendChild(nav);

            // ä½ˆå±€å®¹å™¨ï¼šå·¦å´é¸å–®ï¼Œå³å´å±•ç¤º
            const layout = document.createElement('div');
            layout.className = "w-full max-w-5xl grid grid-cols-1 md:grid-cols-3 gap-6 h-[calc(100vh-180px)]";
            
            // 1. å·¦å´åœ–å½¢é¸æ“‡å™¨
            const sidebar = document.createElement('div');
            sidebar.className = "bg-white rounded-2xl p-4 shadow-sm overflow-y-auto flex md:flex-col gap-2 md:gap-4 no-scrollbar";
            
            shapesData.forEach((shape, index) => {
                const btn = document.createElement('div');
                btn.className = `cursor-pointer p-2 rounded-xl border-2 transition-all hover:bg-gray-50 flex flex-col items-center justify-center shrink-0 w-20 md:w-auto h-20 md:h-auto ${index === 0 ? 'border-blue-400 bg-blue-50' : 'border-transparent'}`;
                btn.id = `learn-btn-${shape.id}`;
                btn.innerHTML = `
                    <svg viewBox="0 0 100 100" class="w-10 h-10 md:w-16 md:h-16 ${shape.fill} drop-shadow-sm">
                        ${shape.path}
                    </svg>
                `;
                btn.onclick = () => selectLearnShape(shape);
                sidebar.appendChild(btn);
            });
            layout.appendChild(sidebar);

            // 2. å³å´å±•ç¤ºå€ (é è¨­é¡¯ç¤ºç¬¬ä¸€å€‹åœ–å½¢)
            const displayArea = document.createElement('div');
            displayArea.id = "learn-display-area";
            displayArea.className = "md:col-span-2 bg-white rounded-3xl shadow-lg p-6 md:p-12 flex flex-col items-center justify-center text-center relative overflow-hidden";
            layout.appendChild(displayArea);

            container.appendChild(layout);

            // åˆå§‹é¸ä¸­ç¬¬ä¸€å€‹
            selectLearnShape(shapesData[0]);
        }

        function selectLearnShape(shape) {
            // æ›´æ–° Sidebar æ¨£å¼
            shapesData.forEach(s => {
                const btn = document.getElementById(`learn-btn-${s.id}`);
                if (btn) {
                    if (s.id === shape.id) {
                        btn.classList.add('border-blue-400', 'bg-blue-50', 'border-2');
                        btn.classList.remove('border-transparent');
                    } else {
                        btn.classList.remove('border-blue-400', 'bg-blue-50', 'border-2');
                        btn.classList.add('border-transparent');
                    }
                }
            });

            // æ›´æ–°å±•ç¤ºå€
            const t = translations[state.lang];
            const display = document.getElementById('learn-display-area');
            const shapeName = t.shapes[shape.subType || shape.type];
            const desc = t.descriptions[shape.subType || shape.type];
            
            // è¨ˆç®—å±¬æ€§é¡¯ç¤º
            let propText = "";
            if (shape.prop.corners > 0) {
                propText = `
                    <div class="flex gap-8 mt-4 text-lg md:text-xl font-bold text-gray-600">
                        <div class="bg-gray-100 px-4 py-2 rounded-lg">ğŸ“ ${shape.prop.sides} ${t.sides}</div>
                        <div class="bg-gray-100 px-4 py-2 rounded-lg">ğŸ“ ${shape.prop.corners} ${t.corners}</div>
                    </div>
                `;
            } else {
                propText = `
                     <div class="flex gap-8 mt-4 text-lg md:text-xl font-bold text-gray-600">
                        <div class="bg-gray-100 px-4 py-2 rounded-lg">â­• ${t.curvedLine}</div>
                        <div class="bg-gray-100 px-4 py-2 rounded-lg">ğŸš« ${t.noCorners}</div>
                    </div>
                `;
            }

            // å‹•ç•«é‡æ–°è§¸ç™¼
            display.innerHTML = `
                <div class="absolute inset-0 opacity-10 ${shape.bg}"></div> <!-- èƒŒæ™¯è‰²å¡Š -->
                
                <div class="relative z-10 w-full flex flex-col items-center animate-[pop_0.5s_ease-out]">
                    <svg viewBox="0 0 100 100" class="w-48 h-48 md:w-64 md:h-64 ${shape.fill} drop-shadow-2xl shape-float cursor-pointer hover:scale-110 transition-transform duration-300">
                        ${shape.path}
                    </svg>
                    
                    <h2 class="text-4xl md:text-5xl font-bold mt-8 mb-2 ${shape.color.replace('text', 'text')}">${shapeName}</h2>
                    <p class="text-gray-500 text-lg md:text-xl max-w-md">${desc}</p>
                    
                    ${propText}
                </div>
            `;
        }

        // éŠæˆ²æ¨¡å¼
        function renderGame(container) {
            const t = translations[state.lang];
            state.score = 0;
            
            // é ‚éƒ¨
            const header = document.createElement('div');
            header.className = "w-full max-w-5xl flex justify-between items-center mb-6";
            header.innerHTML = `
                <button onclick="navigateTo('home')" class="text-gray-500 hover:text-blue-600 font-bold text-lg">â¬… ${t.back}</button>
                <div class="text-2xl font-bold text-blue-600 bg-white px-6 py-2 rounded-full shadow-sm">
                    ${t.score}: <span id="game-score">0</span>
                </div>
            `;
            container.appendChild(header);

            // é¡Œç›®å€
            const questionBox = document.createElement('div');
            questionBox.id = 'question-box';
            questionBox.className = "text-center mb-8";
            container.appendChild(questionBox);

            // éŠæˆ²å€
            const gameBoard = document.createElement('div');
            gameBoard.id = 'game-board';
            gameBoard.className = "grid grid-cols-2 md:grid-cols-4 gap-4 w-full max-w-4xl";
            container.appendChild(gameBoard);

            // çµæœåé¥‹å€ (Toast)
            const feedback = document.createElement('div');
            feedback.id = 'game-feedback';
            feedback.className = "fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-full text-xl font-bold opacity-0 transition-opacity pointer-events-none z-50 shadow-xl";
            document.body.appendChild(feedback);

            startNewRound();
        }

        function startNewRound() {
            const t = translations[state.lang];
            
            // 1. æ±ºå®šè¦æ‰¾ä»€éº¼é¡å‹ (Triangle, Circle, Quadrilateral)
            const types = ['triangle', 'circle', 'quadrilateral'];
            const targetType = types[Math.floor(Math.random() * types.length)];
            state.gameTargetType = targetType;
            
            const targetName = t.shapes[targetType];

            // æ›´æ–°é¡Œç›®
            const qBox = document.getElementById('question-box');
            qBox.innerHTML = `
                <h3 class="text-xl text-gray-500 mb-1">${t.gamePrompt}</h3>
                <h2 class="text-4xl font-bold text-indigo-600 animate-pulse">${targetName}</h2>
            `;

            // 2. ç”¢ç”Ÿé¸é … (æ··åˆæ­£ç¢ºå’ŒéŒ¯èª¤çš„åœ–å½¢)
            const board = document.getElementById('game-board');
            board.innerHTML = '';

            let items = [];
            
            // è‡³å°‘æ”¾ 2-3 å€‹æ­£ç¢ºç­”æ¡ˆ
            const correctShapeBase = shapesData.filter(s => s.type === targetType);
            for(let i=0; i<3; i++) {
                // éš¨æ©Ÿé¸ä¸€å€‹è©²é¡åˆ¥çš„è®Šé«” (å¦‚æœæ˜¯å››é‚Šå½¢ï¼Œå¯èƒ½æ˜¯æ­£æ–¹å½¢æˆ–é•·æ–¹å½¢)
                const s = correctShapeBase[Math.floor(Math.random() * correctShapeBase.length)];
                items.push({ ...s, isTarget: true, uniqueId: Math.random() });
            }

            // æ”¾ 3-5 å€‹éŒ¯èª¤ç­”æ¡ˆ
            const wrongShapeBase = shapesData.filter(s => s.type !== targetType);
            for(let i=0; i<4; i++) {
                const s = wrongShapeBase[Math.floor(Math.random() * wrongShapeBase.length)];
                items.push({ ...s, isTarget: false, uniqueId: Math.random() });
            }

            // æ‰“äº‚é™£åˆ—
            items.sort(() => Math.random() - 0.5);

            // æ¸²æŸ“å¡ç‰‡
            items.forEach(item => {
                const card = document.createElement('div');
                // éš¨æ©Ÿæ—‹è½‰ä¸€é»é»è§’åº¦ï¼Œå¢åŠ è¶£å‘³æ€§
                const rotate = Math.floor(Math.random() * 20) - 10;
                
                card.className = "btn-pop aspect-square bg-white rounded-2xl shadow-md border-b-4 border-gray-200 cursor-pointer flex items-center justify-center hover:bg-gray-50 active:border-b-0 active:translate-y-1 transition-all";
                card.innerHTML = `
                    <svg viewBox="0 0 100 100" class="w-2/3 h-2/3 ${item.fill}" style="transform: rotate(${rotate}deg)">
                        ${item.path}
                    </svg>
                `;
                
                card.onclick = (e) => handleGameClick(e.currentTarget, item);
                board.appendChild(card);
            });
        }

        function handleGameClick(element, item) {
            const t = translations[state.lang];
            const feedback = document.getElementById('game-feedback');

            if (element.classList.contains('opacity-0')) return; // å·²ç¶“é»éäº†

            if (item.isTarget) {
                // ç­”å°
                state.score += 10;
                document.getElementById('game-score').innerText = state.score;
                
                // å‹•ç•«æ•ˆæœ
                element.classList.add('scale-0', 'opacity-0'); // æ¶ˆå¤±
                
                showFeedback(t.correct, 'bg-green-500');
                
                // æª¢æŸ¥æ˜¯å¦é‚„æœ‰å‰©é¤˜ç›®æ¨™
                const board = document.getElementById('game-board');
                const remaining = Array.from(board.children).filter(child => !child.classList.contains('opacity-0'));
                
                // é€™è£¡å…¶å¯¦æ‡‰è©²æª¢æŸ¥ items æ•¸æ“šï¼Œä½†ç°¡åŒ–èµ·è¦‹ï¼Œå¦‚æœé»äº† 3 å€‹æ­£ç¢ºçš„å°±æ›ä¸‹ä¸€è¼ª
                // ç‚ºäº†æ›´å¥½çš„é«”é©—ï¼Œæˆ‘å€‘æª¢æŸ¥æ˜¯å¦å·²ç¶“æ‰¾å‡ºæ‰€æœ‰æ­£ç¢ºç­”æ¡ˆ
                // å› ç‚ºé‚è¼¯åœ¨å‰ç«¯æ˜¯å‹•æ…‹ç”Ÿæˆçš„ï¼Œé€™è£¡ç°¡å–®åˆ¤æ–·ï¼šå¦‚æœè©²è¼ªç­”å°ä¸€å®šæ•¸é‡ï¼Œé€²å…¥ä¸‹ä¸€è¼ª
                
                // ç°¡å–®é‚è¼¯ï¼šé»æ“Šæ­£ç¢ºå°±ç¹¼çºŒï¼Œç›´åˆ°ç•«é¢ä¸Šæ²’æœ‰æ­£ç¢ºç­”æ¡ˆï¼ˆå¤ªè¤‡é›œï¼‰ï¼Œ
                // é€™è£¡æ¡ç”¨ï¼šæ¯ç­”å°ä¸€æ¬¡ï¼Œéš¨æ©Ÿæ±ºå®šæ˜¯å¦æ›æ–°ä¸€è¼ª (33% æ©Ÿç‡) æˆ–è€… ç­”å°ä¸‰å€‹å¼·åˆ¶æ›
                
                if (state.score % 30 === 0) {
                     setTimeout(startNewRound, 800);
                }

            } else {
                // ç­”éŒ¯
                element.classList.add('bg-red-100', 'shake'); // æ–æ™ƒæˆ–è®Šç´…
                setTimeout(() => element.classList.remove('bg-red-100', 'shake'), 500);
                showFeedback(t.wrong, 'bg-red-500');
            }
        }

        function showFeedback(text, colorClass) {
            const feedback = document.getElementById('game-feedback');
            feedback.innerText = text;
            feedback.className = `fixed bottom-10 left-1/2 transform -translate-x-1/2 text-white px-8 py-4 rounded-2xl text-xl font-bold transition-opacity z-50 shadow-xl ${colorClass}`;
            feedback.style.opacity = '1';
            
            setTimeout(() => {
                feedback.style.opacity = '0';
            }, 1000);
        }

        // åˆå§‹åŒ–
        init();

    </script>
</body>
</html>
